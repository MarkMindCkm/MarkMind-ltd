(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d3e2459"],{"09a2":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"popup"},[i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.popupVisible,expression:"popupVisible"}],staticClass:"popup-bg",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.hide.apply(null,arguments)},touchmove:function(t){t.preventDefault()}}})]),i("transition",{attrs:{name:"popup-slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.popupVisible,expression:"popupVisible"}],staticClass:"popup-wrapper"},[t.title&&t.title.length>0?i("div",{staticClass:"popup-title"},[t._v(t._s(t.title))]):t._e(),t.thirdText&&t.thirdText.length>0?i("div",{staticClass:"popup-confirm-btn",on:{click:t.third}},[t._v(t._s(t.thirdText))]):t._e(),i("div",{staticClass:"popup-confirm-btn",class:{"is-remove":t.isRemoveText},on:{click:t.confirm}},[t._v(t._s(t.confirmText))]),i("div",{staticClass:"popup-cancel-btn",on:{click:t.hide}},[t._v(t._s(t.cancelText))])])])],1)},s=[],a={props:{title:String,confirmText:String,isRemoveText:Boolean,cancelText:String,thirdText:String},data:function(){return{popupVisible:!1,visible:!1}},methods:{third:function(){var t=this;this.hide(),setTimeout((function(){t.$emit("third")}),200)},confirm:function(){var t=this;this.hide(),setTimeout((function(){t.$emit("confirm")}),200)},hide:function(){var t=this;this.popupVisible=!1,setTimeout((function(){t.visible=!1}),200)},show:function(){this.visible=!0,this.popupVisible=!0}}},r=a,n=(i("1356"),i("2877")),l=Object(n["a"])(r,o,s,!1,null,"09913b8d",null);e["a"]=l.exports},1356:function(t,e,i){"use strict";i("1f3b")},1443:function(t,e,i){"use strict";i("55a3")},"1d88":function(t,e,i){},"1da1":function(t,e,i){"use strict";function o(t,e,i,o,s,a,r){try{var n=t[a](r),l=n.value}catch(c){return void i(c)}n.done?e(l):Promise.resolve(l).then(o,s)}function s(t){return function(){var e=this,i=arguments;return new Promise((function(s,a){var r=t.apply(e,i);function n(t){o(r,s,a,n,l,"next",t)}function l(t){o(r,s,a,n,l,"throw",t)}n(void 0)}))}}i.d(e,"a",(function(){return s}))},"1f3b":function(t,e,i){},2129:function(t,e,i){"use strict";i("af98")},"28f6":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[t.visible?i("div",{staticClass:"shelf-group-dialog-bg"},[t.selectGroupDialogVisible?i("div",{staticClass:"shelf-group-dialog-wrapper"},[i("div",{staticClass:"dialog-list"},[i("div",{staticClass:"dialog-title-wrapper"},[i("span",{staticClass:"dialog-title-text"},[t._v(t._s(t.$t("shelf.moveBook")))])]),i("div",{staticClass:"dialog-list-wrapper"},t._l(t.categoryList,(function(e,o){return 2===e.edit&&t.isInGroup||2!==e.edit||!e.edit?i("div",{key:o,staticClass:"dialog-list-item",class:{"is-add":!!e.edit&&1===e.edit},on:{click:function(i){return t.onGroupClick(e)}}},[i("div",{staticClass:"dialog-list-item-text"},[t._v(t._s(e.title))]),t.category&&e.id&&t.category.id===e.id?i("div",{staticClass:"dialog-list-icon-wrapper"},[i("span",{staticClass:"icon-check"})]):t._e()]):t._e()})),0)]),i("div",{staticClass:"dialog-btn-wrapper",on:{click:t.hide}},[i("div",{staticClass:"dialog-btn"},[t._v(t._s(t.$t("shelf.cancel")))])])]):t._e(),t.newGroupDialogVisible?i("div",{staticClass:"shelf-group-dialog-wrapper"},[i("div",{staticClass:"dialog-list"},[i("div",{staticClass:"dialog-title-wrapper"},[i("span",{staticClass:"dialog-title-text"},[t._v(t._s(t.$t("shelf.newGroup")))])]),i("div",{staticClass:"dialog-input-title-wrapper"},[i("span",{staticClass:"dialog-input-title"},[t._v(t._s(t.$t("shelf.groupName")))])]),i("div",{staticClass:"dialog-input-wrapper"},[i("div",{staticClass:"dialog-input-inner-wrapper"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newGroupName,expression:"newGroupName"}],ref:"dialogInput",staticClass:"dialog-input",attrs:{type:"text"},domProps:{value:t.newGroupName},on:{input:function(e){e.target.composing||(t.newGroupName=e.target.value)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.newGroupName.length>0,expression:"newGroupName.length > 0"}],staticClass:"dialog-input-clear-wrapper",on:{click:t.clear}},[i("span",{staticClass:"icon-close-circle-fill"})])])])]),i("div",{staticClass:"dialog-btn-wrapper"},[i("div",{staticClass:"dialog-btn",on:{click:t.hide}},[t._v(t._s(t.$t("shelf.cancel")))]),i("div",{staticClass:"dialog-btn",class:{"is-empty":0===t.newGroupName.length},on:{click:t.createNewGroup}},[t._v(t._s(t.$t("shelf.confirm")))])])]):t._e()]):t._e()])},s=[],a=i("2909"),r={props:{visible:Boolean,data:Array,bookList:Array,isInGroup:Boolean,category:Object,isEditGroupName:{type:Boolean,default:!1}},computed:{defaultCategory:function(){return[{title:this.$t("shelf.newGroup"),edit:1},{title:this.$t("shelf.groupOut"),edit:2}]},categoryList:function(){var t=this.bookList?this.bookList.filter((function(t){return 2===t.type})):[];return[].concat(Object(a["a"])(this.defaultCategory),Object(a["a"])(t))}},data:function(){return{newGroupDialogVisible:!1,selectGroupDialogVisible:!0,newGroupName:""}},methods:{createNewGroup:function(){this.isEditGroupName?(this.$emit("editGroupName",this.category,this.newGroupName),this.hide()):(this.newGroupName.length>0&&this.$emit("group",2,{id:this.bookList[this.bookList.length-2].id+1,itemList:[],selected:!1,title:this.newGroupName,type:2}),this.hide())},clear:function(){this.newGroupName=""},onGroupClick:function(t){t.edit&&1===t.edit?this.showCreateGroupDialog():t.edit&&2===t.edit?(this.$emit("group",3,t),this.hide()):(this.$emit("group",1,t),this.hide())},showCreateGroupDialog:function(){var t=this;this.newGroupDialogVisible=!0,this.selectGroupDialogVisible=!1,this.newGroupName="",this.$nextTick((function(){t.$refs.dialogInput.focus()}))},showEditGroupDialog:function(){var t=this;this.newGroupDialogVisible=!0,this.selectGroupDialogVisible=!1,this.newGroupName=this.category.title,this.$nextTick((function(){t.$refs.dialogInput.focus()}))},show:function(){this.$emit("update:visible",!0)},hide:function(){this.$emit("update:visible",!1),this.newGroupDialogVisible=!1,this.selectGroupDialogVisible=!0}}},n=r,l=(i("eb88"),i("2877")),c=Object(l["a"])(n,o,s,!1,null,"27a02eda",null);e["a"]=c.exports},2909:function(t,e,i){"use strict";function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function s(t){if(Array.isArray(t))return o(t)}function a(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function r(t,e){if(t){if("string"===typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(t,e):void 0}}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return s(t)||a(t)||r(t)||n()}i.d(e,"a",(function(){return l}))},"55a3":function(t,e,i){},"5ba5":function(t,e,i){},"5bc8":function(t,e,i){"use strict";i("acc6")},"76e1":function(t,e,i){"use strict";i("ad78")},"7f1b":function(t,e,i){"use strict";i("5ba5")},"96cf":function(t,e,i){var o=function(t){"use strict";var e,i=Object.prototype,o=i.hasOwnProperty,s="function"===typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",r=s.asyncIterator||"@@asyncIterator",n=s.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(N){l=function(t,e,i){return t[e]=i}}function c(t,e,i,o){var s=e&&e.prototype instanceof m?e:m,a=Object.create(s.prototype),r=new T(o||[]);return a._invoke=$(t,i,r),a}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(N){return{type:"throw",arg:N}}}t.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",f="completed",v={};function m(){}function g(){}function b(){}var w={};l(w,a,(function(){return this}));var y=Object.getPrototypeOf,k=y&&y(y(S([])));k&&k!==i&&o.call(k,a)&&(w=k);var x=b.prototype=m.prototype=Object.create(w);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function i(s,a,r,n){var l=u(t[s],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"===typeof h&&o.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,r,n)}),(function(t){i("throw",t,r,n)})):e.resolve(h).then((function(t){c.value=t,r(c)}),(function(t){return i("throw",t,r,n)}))}n(l.arg)}var s;function a(t,o){function a(){return new e((function(e,s){i(t,o,e,s)}))}return s=s?s.then(a,a):a()}this._invoke=a}function $(t,e,i){var o=h;return function(s,a){if(o===d)throw new Error("Generator is already running");if(o===f){if("throw"===s)throw a;return L()}i.method=s,i.arg=a;while(1){var r=i.delegate;if(r){var n=G(r,i);if(n){if(n===v)continue;return n}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===h)throw o=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=d;var l=u(t,e,i);if("normal"===l.type){if(o=i.done?f:p,l.arg===v)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(o=f,i.method="throw",i.arg=l.arg)}}}function G(t,i){var o=t.iterator[i.method];if(o===e){if(i.delegate=null,"throw"===i.method){if(t.iterator["return"]&&(i.method="return",i.arg=e,G(t,i),"throw"===i.method))return v;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var s=u(o,t.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,v;var a=s.arg;return a?a.done?(i[t.resultName]=a.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,v):a:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,v)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var i=t[a];if(i)return i.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var s=-1,r=function i(){while(++s<t.length)if(o.call(t,s))return i.value=t[s],i.done=!1,i;return i.value=e,i.done=!0,i};return r.next=r}}return{next:L}}function L(){return{value:e,done:!0}}return g.prototype=b,l(x,"constructor",b),l(b,"constructor",g),g.displayName=l(b,n,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,n,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},C(_.prototype),l(_.prototype,r,(function(){return this})),t.AsyncIterator=_,t.async=function(e,i,o,s,a){void 0===a&&(a=Promise);var r=new _(c(e,i,o,s),a);return t.isGeneratorFunction(i)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},C(x),l(x,n,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){while(e.length){var o=e.pop();if(o in t)return i.value=o,i.done=!1,i}return i.done=!0,i}},t.values=S,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var i in this)"t"===i.charAt(0)&&o.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function s(o,s){return n.type="throw",n.arg=t,i.next=o,s&&(i.method="next",i.arg=e),!!s}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],n=r.completion;if("root"===r.tryLoc)return s("end");if(r.tryLoc<=this.prev){var l=o.call(r,"catchLoc"),c=o.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return s(r.catchLoc,!0);if(this.prev<r.finallyLoc)return s(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return s(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return s(r.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&o.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var a=s;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=t,r.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),D(i),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var o=i.completion;if("throw"===o.type){var s=o.arg;D(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,o){return this.delegate={iterator:S(t),resultName:i,nextLoc:o},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=o}catch(s){"object"===typeof globalThis?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},9878:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book-shelf-wrapper"},[0===t.showType||1===t.showType?i("transition-group",{attrs:{name:"list",tag:"div",id:"book-shelf-list"}},t._l(t.bookData,(function(e,o){return i("div",{key:e.id,staticClass:"book-shelf-item",on:{click:function(i){return t.onBookClick(e,o)}}},[i("div",{ref:"bookImg",refInFor:!0,staticClass:"book-img-wrapper",class:{"add-book":3===e.type,"category-book":2===e.type}},[1===e.type?i("shelf-image",{attrs:{data:e,isEditMode:t.isEditMode}}):2===e.type?i("shelf-category",{attrs:{data:e,isEditMode:t.isEditMode}}):i("span",{staticClass:"icon-add icon"})],1),i("div",{staticClass:"book-title-wrapper"},[i("span",{staticClass:"book-title title-small"},[t._v(t._s(e.title))])])])})),0):t._e(),2===t.showType||3===t.showType?i("div",{staticClass:"book-shelf-label-list-wrapper"},t._l(t.purchaseData,(function(e,o){return i("div",{key:o,ref:"bookShelfList",refInFor:!0,staticClass:"book-shelf-list-wrapper"},[i("div",{staticClass:"book-shelf-label-item",class:{"is-fixed":e.isFixed}},[i("span",{staticClass:"book-shelf-label-text"},[t._v(t._s(e.label))])]),i("div",{staticClass:"book-shelf-item-wrapper"},t._l(e.bookList,(function(e,o){return i("div",{key:e.id,staticClass:"book-shelf-item",on:{click:function(i){return t.onBookClick(e,o)}}},[i("div",{ref:"bookImg",refInFor:!0,staticClass:"book-img-wrapper",class:{"add-book":3===e.type,"category-book":2===e.type}},[1===e.type?i("shelf-image",{attrs:{data:e,isEditMode:t.isEditMode}}):2===e.type?i("shelf-category",{attrs:{data:e,isEditMode:t.isEditMode}}):i("span",{staticClass:"icon-add icon"})],1),i("div",{staticClass:"book-title-wrapper"},[i("span",{staticClass:"book-title title-small"},[t._v(t._s(e.title))])])])})),0)])})),0):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.showType,expression:"showType === 0"}],staticClass:"book-shelf-statistics"},[t._v(t._s(t.$t("shelf.statistic").replace("$1",t.publicNumber).replace("$2",t.privateNumber))+"\n  ")])],1)},s=[],a=(i("c5f6"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shelf-category-wrapper"},[t.data.itemList.length>0?i("div",{staticClass:"shelf-category",class:{"is-edit":t.isEditMode}},t._l(t.data.itemList,(function(t,e){return i("div",{key:e,staticClass:"shelf-category-item"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.cover,expression:"item.cover"}],staticClass:"shelf-category-img"})])})),0):i("div",{staticClass:"shelf-category-bg"},[i("span",{staticClass:"icon-book2"})])])}),r=[],n={props:{data:Object,isEditMode:Boolean}},l=n,c=(i("1443"),i("2877")),u=Object(c["a"])(l,a,r,!1,null,"20d63aec",null),h=u.exports,p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shelf-image"},[i("img",{staticClass:"book-img",attrs:{src:t.data.cover}}),i("span",{directives:[{name:"show",rawName:"v-show",value:t.isEditMode,expression:"isEditMode"}],staticClass:"icon-selected",class:{"is-selected":t.data.selected}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.data.private,expression:"data.private"}],staticClass:"private-wrapper"}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.data.private,expression:"data.private"}],staticClass:"private-icon-wrapper"},[i("span",{staticClass:"icon-private"})])])},d=[],f={props:{data:Object,isEditMode:Boolean}},v=f,m=(i("5bc8"),Object(c["a"])(v,p,d,!1,null,"19afbf0b",null)),g=m.exports,b=i("fa7d"),w=i("5de6"),y={props:{data:Array,isEditMode:Boolean,showType:{type:Number,default:0}},components:{ShelfCategory:h,ShelfImage:g},computed:{bookData:function(){return 0===this.showType?this.data:1===this.showType?Object(w["g"])(this.data):void 0},publicNumber:function(){if(this.data){var t=0;return this.data.filter((function(e){e.private||1!==e.type?2===e.type&&e.itemList.length>0&&(t+=e.itemList.filter((function(t){return!t.private&&1===t.type})).length):t++})),t}return 0},privateNumber:function(){if(this.data){var t=0;return this.data.filter((function(e){e.private&&1===e.type?t++:2===e.type&&e.itemList.length>0&&(t+=e.itemList.filter((function(t){return t.private&&1===t.type})).length)})),t}return 0},purchaseData:function(){var t={label:this.$t("shelf.bought"),bookList:this.flatData.filter((function(t){return t.cache})),isFixed:!1},e={label:this.$t("shelf.notPurchased"),bookList:this.flatData.filter((function(t){return!t.cache})),isFixed:!1};return[t,e]},bookShelfList:function(){return this.$refs.bookShelfList[0].getBoundingClientRect().height},bookShelfList2:function(){return this.$refs.bookShelfList[1].getBoundingClientRect().height}},methods:{fixTitle:function(t){2!==this.showType&&3!==this.showType||(t>Object(b["d"])(10)&&t<this.bookShelfList?!1===this.purchaseData[0].isFixed&&(this.purchaseData[0].isFixed=!0,this.purchaseData[1].isFixed=!1,this.$forceUpdate()):t>=this.bookShelfList-Object(b["d"])(42)?!1===this.purchaseData[1].isFixed&&(this.purchaseData[0].isFixed=!1,this.purchaseData[1].isFixed=!0,this.$forceUpdate()):(this.purchaseData[0].isFixed=!1,this.purchaseData[1].isFixed=!1,this.$forceUpdate()))},onBookClick:function(t,e){3===t.type?this.$router.push("/book-store/home"):1===t.type?this.isEditMode?t.selected=!t.selected:this.$emit("onBookClick",t,e):2===t.type&&(this.isEditMode||this.$router.push({path:"/book-store/category",query:{index:e}}))}}},k=y,x=(i("76e1"),Object(c["a"])(k,o,s,!1,null,"1a103957",null));e["a"]=x.exports},acc6:function(t,e,i){},ad78:function(t,e,i){},af98:function(t,e,i){},cd05:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book-shelf-footer"},[t._l(t.tabs,(function(e,o){return i("div",{key:o,staticClass:"book-shelf-tab-wrapper",on:{click:function(i){return t.onTabClick(e)}}},[i("div",{staticClass:"book-shelf-tab"},[1!==e.index||t.isPrivate?t._e():i("div",{staticClass:"icon-private tab-icon",class:{"is-selected":t.isSelected}}),1===e.index&&t.isPrivate?i("div",{staticClass:"icon-private-see tab-icon",class:{"is-selected":t.isSelected}}):t._e(),2!==e.index||t.isDownload?t._e():i("div",{staticClass:"icon-download tab-icon",class:{"is-selected":t.isSelected}}),2===e.index&&t.isDownload?i("div",{staticClass:"icon-download-remove tab-icon",class:{"is-selected":t.isSelected}}):t._e(),3===e.index?i("div",{staticClass:"icon-move tab-icon",class:{"is-selected":t.isSelected}}):t._e(),4===e.index?i("div",{staticClass:"icon-shelf tab-icon",class:{"is-selected":t.isSelected}}):t._e(),i("div",{staticClass:"tab-text",class:{"remove-text":4===e.index,"is-selected":t.isSelected}},[t._v(t._s(t.label(e))+"\n      ")])])])})),i("popup",{ref:"popup",attrs:{title:t.popTitle,confirmText:t.confirmText,isRemoveText:t.isRemoveText,cancelText:t.$t("shelf.cancel")},on:{confirm:t.onConfirm}}),i("shelf-group-dialog",{attrs:{visible:t.ifGroupDialogShow,data:t.data,bookList:t.bookList,category:t.category,isInGroup:t.isInGroup},on:{"update:visible":function(e){t.ifGroupDialogShow=e},group:t.groupEdit}})],2)},s=[],a=(i("a481"),i("ac6a"),i("09a2")),r=i("28f6"),n={props:{data:Array,isInGroup:Boolean,bookList:Array,category:Object},components:{ShelfGroupDialog:r["a"],Popup:a["a"]},computed:{selectedBooks:function(){var t=[];return this.data.forEach((function(e){e.selected&&t.push(e)})),t},isSelected:function(){return!!this.data&&this.data.some((function(t){return t.selected}))},isPrivate:function(){return!!this.isSelected&&this.data.every((function(t){return!t.selected||t.private}))},isDownload:function(){return!!this.isSelected&&this.data.every((function(t){return!t.selected||t.cache}))},tabs:function(){return[{label:this.$t("shelf.private"),label2:this.$t("shelf.noPrivate"),index:1},{label:this.$t("shelf.download"),label2:this.$t("shelf.delete"),index:2},{label:this.$t("shelf.move"),index:3},{label:this.$t("shelf.remove"),index:4}]}},data:function(){return{popTitle:"",confirmText:"",isRemoveText:!1,ifShowPopup:!1,ifGroupDialogShow:!1,onConfirm:function(){}}},methods:{label:function(t){switch(t.index){case 1:return this.isPrivate?t.label2:t.label;case 2:return this.isDownload?t.label2:t.label;default:return t.label}},removeBook:function(){this.$emit("removeBook")},onSetDownload:function(){this.$emit("setDownload",!0)},onRemoveDownload:function(){this.$emit("setDownload",!1)},onSetPrivate:function(){this.$emit("setPrivate",!0)},onCancelPrivate:function(){this.$emit("setPrivate",!1)},onTabClick:function(t){1===t.index?this.showPrivate():2===t.index?this.showDownload():3===t.index?this.showGroupDialog():4===t.index&&this.showRemove()},showGroupDialog:function(){this.isSelected&&(this.ifGroupDialogShow=!0)},showRemove:function(){var t;this.isSelected&&(t=1===this.selectedBooks.length?this.$t("shelf.removeBookTitle").replace("$1","《"+this.selectedBooks[0].title+"》"):this.$t("shelf.removeBookTitle").replace("$1",this.$t("shelf.selectedBooks")),this.showPopup(t,this.$t("shelf.removeBook"),this.removeBook,!0))},showDownload:function(){this.isSelected&&(this.isDownload?this.showPopup(this.$t("shelf.removeDownloadTitle"),this.$t("shelf.delete"),this.onRemoveDownload,!0):this.showPopup(this.$t("shelf.setDownloadTitle"),this.$t("shelf.open"),this.onSetDownload))},showPrivate:function(){this.isSelected&&(this.isPrivate?this.showPopup(this.$t("shelf.closePrivateTitle"),this.$t("shelf.close"),this.onCancelPrivate):this.showPopup(this.$t("shelf.setPrivateTitle"),this.$t("shelf.open"),this.onSetPrivate))},showPopup:function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.popTitle=t,this.confirmText=e,this.onConfirm=i,this.isRemoveText=o,this.$refs.popup.show()},groupEdit:function(t,e){this.$emit("groupEdit",t,e)}}},l=n,c=(i("7f1b"),i("2877")),u=Object(c["a"])(l,o,s,!1,null,"b32439de",null);e["a"]=u.exports},eb88:function(t,e,i){"use strict";i("1d88")},ebe4:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[i("div",{staticClass:"shelf-title-wrapper",class:{"hide-shadow":t.ifHideShadow}},[i("div",{staticClass:"title"},[i("span",{staticClass:"title-text"},[t._v(t._s(t.title))]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.isEditMode,expression:"isEditMode"}],staticClass:"sub-title-text"},[t._v(t._s(t.selectedText))])]),t.ifGroupEmpty||t.isDataEmpty?t._e():i("div",{staticClass:"btn-text-wrapper",on:{click:t.onEditClick}},[i("span",{staticClass:"btn-text"},[t._v(t._s(t.isEditMode?t.$t("shelf.cancel"):t.$t("shelf.edit")))])]),t.ifGroupEmpty&&!t.isDataEmpty?i("div",{staticClass:"btn-text-wrapper",on:{click:t.changeGroup}},[i("span",{staticClass:"btn-text"},[t._v(t._s(t.$t("shelf.editGroup")))])]):t._e(),t.isDataEmpty?i("div",{staticClass:"btn-text-wrapper",on:{click:t.changeLanguage}},[i("span",{staticClass:"btn-text"},[t._v(t._s(t.$t("shelf.changeLanguage")))])]):t._e(),t.ifShowClear&&!t.isDataEmpty?i("div",{staticClass:"btn-clear-wrapper",on:{click:t.clearCache}},[i("span",{staticClass:"btn-clear"},[t._v(t._s(t.$t("shelf.clearCache")))])]):t._e(),t.ifShowBack&&!t.isEditMode?i("div",{staticClass:"btn-back-wrapper",on:{click:t.back}},[i("span",{staticClass:"icon-back"})]):t._e(),t.ifShowBack&&t.isEditMode?i("div",{staticClass:"btn-back-wrapper",on:{click:t.changeGroup}},[i("span",{staticClass:"btn-text"},[t._v(t._s(t.$t("shelf.editGroup")))])]):t._e(),i("popup",{ref:"popup",attrs:{title:t.popupTitle,thirdText:t.thirdText,confirmText:t.confirmText,isRemoveText:!0,cancelText:t.$t("shelf.cancel")},on:{confirm:t.onPopupDelete,third:t.onPopupChange}}),i("shelf-group-dialog",{ref:"groupDialog",attrs:{visible:t.ifGroupDialogShow,isEditGroupName:!0,category:t.category},on:{"update:visible":function(e){t.ifGroupDialogShow=e},editGroupName:t.editGroupName}})],1)])},s=[],a=(i("a481"),i("09a2")),r=i("28f6"),n=i("5de6"),l={components:{ShelfGroupDialog:r["a"],Popup:a["a"]},props:{isEditMode:Boolean,ifShowBack:Boolean,ifShowClear:Boolean,ifGroupEmpty:Boolean,data:Array,title:String,category:Object},computed:{isDataEmpty:function(){return!this.data||0===this.data.filter((function(t){return 3!==t.type})).length},selectedText:function(){return 0===this.selectedNumber?this.$t("shelf.selectBook"):1===this.selectedNumber?this.$t("shelf.haveSelectedBook").replace("$1",this.selectedNumber):this.$t("shelf.haveSelectedBooks").replace("$1",this.selectedNumber)},selectedNumber:function(){return this.category&&this.category.itemList?this.category.itemList.filter((function(t){return t.selected})).length:this.data?this.data.filter((function(t){return t.selected})).length:0},thirdText:function(){return this.isDeleteGroup?"":this.$t("shelf.editGroupName")},popupTitle:function(){return this.isDeleteGroup?this.$t("shelf.deleteGroupTitle"):""},confirmText:function(){return this.isDeleteGroup?this.$t("shelf.confirm"):this.$t("shelf.deleteGroup")}},data:function(){return{ifHideShadow:!0,ifGroupDialogShow:!1,isDeleteGroup:!1}},methods:{changeLanguage:function(){Object(n["n"])(this)},editGroupName:function(t,e){this.$emit("editGroupName",t,e)},showPopup:function(){this.$refs.popup.show()},onPopupDelete:function(){var t=this;this.isDeleteGroup?(this.$emit("deleteGroup",this.category),this.isDeleteGroup=!1):(this.$refs.popup.hide(),setTimeout((function(){t.isDeleteGroup=!0,t.$refs.popup.show()}),200))},onPopupChange:function(){this.ifGroupDialogShow=!0,this.$refs.groupDialog.showEditGroupDialog()},changeGroup:function(){this.showPopup()},back:function(){this.$router.go(-1)},clearCache:function(){this.$emit("clearCache")},showShadow:function(){this.ifHideShadow=!1},hideShadow:function(){this.ifHideShadow=!0},onEditClick:function(){this.isEditMode?this.$emit("onEditClick",!1):this.$emit("onEditClick",!0)}}},c=l,u=(i("2129"),i("2877")),h=Object(u["a"])(c,o,s,!1,null,"3dbaa232",null);e["a"]=h.exports}}]);