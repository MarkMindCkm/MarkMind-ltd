"use strict";const e=require("electron"),o=require("node:path");var l=require("electron-store");const t=new l;require("@electron/remote/main").initialize();var p=t.get("localTime");p||t.set("localTime",new Date().getTime());process.env.DIST=o.join(__dirname,"../dist");process.env.VITE_PUBLIC=e.app.isPackaged?process.env.DIST:o.join(process.env.DIST,"../public");let n;const i=process.env.VITE_DEV_SERVER_URL;function s(){n=new e.BrowserWindow({width:1200,height:800,icon:o.join(process.env.VITE_PUBLIC,"icon.png"),webPreferences:{nodeIntegration:!0,contextIsolation:!1,webSecurity:!1,enableRemoteModule:!0}}),require("@electron/remote/main").enable(n.webContents),n.webContents.on("did-finish-load",()=>{n==null||n.webContents.send("main-process-message","")}),i?n.loadURL(i):n.loadFile(o.join(process.env.DIST,"index.html"))}e.app.on("window-all-closed",()=>{process.platform!=="darwin"&&(e.app.quit(),n=null)});e.app.on("activate",()=>{e.BrowserWindow.getAllWindows().length===0&&s()});e.app.whenReady().then(s);e.ipcMain.on("openDevTools",(a,r)=>{n&&n.webContents.openDevTools()});e.app.on("window-all-closed",()=>{e.app.quit()});e.ipcMain.on("relaunch",(a,r)=>{e.app.relaunch(),e.app.exit()});
