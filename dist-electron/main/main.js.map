{"version":3,"file":"main.js","sources":["../../electron/main.ts"],"sourcesContent":["import { app, BrowserWindow, ipcMain, shell,Menu } from 'electron'\nimport path from 'node:path'\n\nvar Store = require('electron-store');\nconst store = new Store();\n\n\nrequire('@electron/remote/main').initialize()\n\nvar t = store.get('localTime');\nif(!t){\n  store.set('localTime', new Date().getTime())\n}\n\n// The built directory structure\n//\n// â”œâ”€â”¬â”€â”¬ dist\n// â”‚ â”‚ â””â”€â”€ index.html\n// â”‚ â”‚\n// â”‚ â”œâ”€â”¬ dist-electron\n// â”‚ â”‚ â”œâ”€â”€ main.js\n// â”‚ â”‚ â””â”€â”€ preload.js\n// â”‚\nprocess.env.DIST = path.join(__dirname, '../dist')\nprocess.env.VITE_PUBLIC = app.isPackaged ? process.env.DIST : path.join(process.env.DIST, '../public')\n\n\nlet win: BrowserWindow | null\n// ðŸš§ Use ['ENV_NAME'] avoid vite:define plugin - Vite@2.x\nconst VITE_DEV_SERVER_URL = process.env['VITE_DEV_SERVER_URL']\n\nfunction createWindow() {\n  win = new BrowserWindow({\n    icon: path.join(process.env.VITE_PUBLIC, 'icon.png'),\n    webPreferences: {\n      // preload: path.join(__dirname, 'preload.js'),\n      nodeIntegration: true,\n      contextIsolation: false,\n      webSecurity: false,\n      enableRemoteModule: true\n    },\n  })\n\n  require('@electron/remote/main').enable(win.webContents);\n\n  // Test active push message to Renderer-process.\n  win.webContents.on('did-finish-load', () => {\n    win?.webContents.send('main-process-message', '')\n  });\n\n  Menu.setApplicationMenu(null);\n\n  if (VITE_DEV_SERVER_URL) {\n    win.loadURL(VITE_DEV_SERVER_URL)\n  } else {\n    // win.loadFile('dist/index.html')\n    win.loadFile(path.join(process.env.DIST, 'index.html'))\n  }\n}\n\n// Quit when all windows are closed, except on macOS. There, it's common\n// for applications and their menu bar to stay active until the user quits\n// explicitly with Cmd + Q.\napp.on('window-all-closed', () => {\n  if (process.platform !== 'darwin') {\n    app.quit()\n    win = null\n  }\n})\n\napp.on('activate', () => {\n  // On OS X it's common to re-create a window in the app when the\n  // dock icon is clicked and there are no other windows open.\n  if (BrowserWindow.getAllWindows().length === 0) {\n    createWindow()\n  }\n})\n\napp.whenReady().then(createWindow);\n\n\nipcMain.on('openExportWindow', (e, arg) => {\n  var w = new BrowserWindow({\n    icon: path.join(process.env.VITE_PUBLIC, 'electron-vite.svg'),\n    webPreferences: {\n      // preload: path.join(__dirname, 'preload.js'),\n      nodeIntegration: true,\n      contextIsolation: false,\n      webSecurity: false,\n      enableRemoteModule: true\n    },\n  });\n\n  require('@electron/remote/main').enable(w.webContents);\n\n\n\n  w.webContents.on('did-finish-load', () => {\n\n    w?.webContents.send('main-process-message', arg)\n  });\n\n  if (VITE_DEV_SERVER_URL) {\n    win.loadURL(VITE_DEV_SERVER_URL)\n  } else {\n    // win.loadFile('dist/index.html')\n    win.loadFile(path.join(process.env.DIST, 'index.html'))\n  }\n\n})\n\napp.on('window-all-closed', () => {\n  app.quit()\n})\n\nipcMain.on('relaunch', (e, arg) => {\n\n  app.relaunch()\n  app.exit()\n})\n\n"],"names":["app","BrowserWindow","Menu","ipcMain"],"mappings":";;;AAGA,IAAI,QAAQ,QAAQ,gBAAgB;AACpC,MAAM,QAAQ,IAAI;AAGlB,QAAQ,uBAAuB,EAAE;AAEjC,IAAI,IAAI,MAAM,IAAI,WAAW;AAC7B,IAAG,CAAC,GAAE;AACJ,QAAM,IAAI,cAAa,oBAAI,KAAK,GAAE,SAAS;AAC7C;AAWA,QAAQ,IAAI,OAAO,KAAK,KAAK,WAAW,SAAS;AACjD,QAAQ,IAAI,cAAcA,SAAI,IAAA,aAAa,QAAQ,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,MAAM,WAAW;AAGrG,IAAI;AAEJ,MAAM,sBAAsB,QAAQ,IAAI,qBAAqB;AAE7D,SAAS,eAAe;AACtB,QAAM,IAAIC,SAAAA,cAAc;AAAA,IACtB,MAAM,KAAK,KAAK,QAAQ,IAAI,aAAa,UAAU;AAAA,IACnD,gBAAgB;AAAA;AAAA,MAEd,iBAAiB;AAAA,MACjB,kBAAkB;AAAA,MAClB,aAAa;AAAA,MACb,oBAAoB;AAAA,IACtB;AAAA,EAAA,CACD;AAED,UAAQ,uBAAuB,EAAE,OAAO,IAAI,WAAW;AAGnD,MAAA,YAAY,GAAG,mBAAmB,MAAM;AACrC,+BAAA,YAAY,KAAK,wBAAwB;AAAA,EAAE,CACjD;AAEDC,gBAAK,mBAAmB,IAAI;AAE5B,MAAI,qBAAqB;AACvB,QAAI,QAAQ,mBAAmB;AAAA,EAAA,OAC1B;AAEL,QAAI,SAAS,KAAK,KAAK,QAAQ,IAAI,MAAM,YAAY,CAAC;AAAA,EACxD;AACF;AAKAF,SAAAA,IAAI,GAAG,qBAAqB,MAAM;AAC5B,MAAA,QAAQ,aAAa,UAAU;AACjCA,aAAA,IAAI,KAAK;AACH,UAAA;AAAA,EACR;AACF,CAAC;AAEDA,SAAAA,IAAI,GAAG,YAAY,MAAM;AAGvB,MAAIC,uBAAc,gBAAgB,WAAW,GAAG;AACjC;EACf;AACF,CAAC;AAEDD,SAAI,IAAA,UAAY,EAAA,KAAK,YAAY;AAGjCG,SAAA,QAAQ,GAAG,oBAAoB,CAAC,GAAG,QAAQ;AACrC,MAAA,IAAI,IAAIF,uBAAc;AAAA,IACxB,MAAM,KAAK,KAAK,QAAQ,IAAI,aAAa,mBAAmB;AAAA,IAC5D,gBAAgB;AAAA;AAAA,MAEd,iBAAiB;AAAA,MACjB,kBAAkB;AAAA,MAClB,aAAa;AAAA,MACb,oBAAoB;AAAA,IACtB;AAAA,EAAA,CACD;AAED,UAAQ,uBAAuB,EAAE,OAAO,EAAE,WAAW;AAInD,IAAA,YAAY,GAAG,mBAAmB,MAAM;AAErC,2BAAA,YAAY,KAAK,wBAAwB;AAAA,EAAG,CAChD;AAED,MAAI,qBAAqB;AACvB,QAAI,QAAQ,mBAAmB;AAAA,EAAA,OAC1B;AAEL,QAAI,SAAS,KAAK,KAAK,QAAQ,IAAI,MAAM,YAAY,CAAC;AAAA,EACxD;AAEF,CAAC;AAEDD,SAAAA,IAAI,GAAG,qBAAqB,MAAM;AAChCA,WAAA,IAAI,KAAK;AACX,CAAC;AAEDG,SAAA,QAAQ,GAAG,YAAY,CAAC,GAAG,QAAQ;AAEjCH,WAAA,IAAI,SAAS;AACbA,WAAA,IAAI,KAAK;AACX,CAAC;"}